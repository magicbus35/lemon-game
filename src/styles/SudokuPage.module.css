.page{
  --note: color-mix(in oklab, var(--text, var(--c-text)), transparent 80%);
  --user-blue: var(--sudoku-user, #3b82f6);
}

.header{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.header h1{ margin:0; font-size:24px; }
.controls{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.selectWrap select{ background: var(--input-bg); color: var(--input-text); border:1px solid var(--input-border); border-radius:8px; padding:6px 8px; }

.boardWrap{ display:flex; flex-direction:column; align-items:center; margin: 12px 0; }

/* ====== 바깥 굵은 테두리 ====== */
.frame{
  --grid-bold-w: 3px;
  background: var(--panel);
  border: var(--grid-bold-w) solid var(--grid-bold);
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(0,0,0,.06);
  padding: 0;
}

/* ====== 9×9 셀 컨테이너 ====== */
.board{
  --cell: 44px;            /* 셀 한 칸 크기 */
  --grid-thin-w: 1px;      /* 얇은 내부 그리드 두께 */

  position: relative;
  display:grid;
  grid-template-columns: repeat(9, var(--cell));
  grid-template-rows: repeat(9, var(--cell));
  width: calc(var(--cell) * 9);
  height: calc(var(--cell) * 9);
  border-radius: 6px;      /* 프레임보다 살짝 작게 */
  background: transparent;
}

/* 얇은 내부 그리드 (셀 원점 기준) */
.board::before{
  content:"";
  position:absolute;
  /* 오른쪽/아래쪽은 마지막 선이 프레임과 겹치지 않게 살짝 안쪽으로 */
  inset: 0 var(--grid-thin-w) var(--grid-thin-w) 0;
  border-radius: inherit;
  background-image:
    linear-gradient(to right, var(--grid) var(--grid-thin-w), transparent 0),
    linear-gradient(to bottom, var(--grid) var(--grid-thin-w), transparent 0);
  background-size: var(--cell) var(--cell), var(--cell) var(--cell);
  background-repeat: repeat;
  background-position: 0 0, 0 0;
  z-index: 1;
  pointer-events:none;
}

/* 3×3 굵은 선 (얇은 선 위에) */
.board::after{
  content:"";
  position:absolute;
  /* 이쪽도 오른쪽/아래쪽 한 줄은 프레임과 안 겹치게 */
  inset: 0 var(--grid-bold-w) var(--grid-bold-w) 0;
  border-radius: inherit;
  background-image:
    repeating-linear-gradient(
      to right,
      transparent 0 calc(var(--cell)*3 - var(--grid-bold-w)),
      var(--grid-bold) 0 calc(var(--cell)*3)
    ),
    repeating-linear-gradient(
      to bottom,
      transparent 0 calc(var(--cell)*3 - var(--grid-bold-w)),
      var(--grid-bold) 0 calc(var(--cell)*3)
    );
  background-size: 100% 100%, 100% 100%;
  background-repeat: no-repeat, no-repeat;
  z-index: 1;
  pointer-events:none;
}

/* 셀 – 선은 그리지 않고 투명 */
.cell{
  width: var(--cell);
  height: var(--cell);
  position: relative;
  background: transparent;
  user-select:none;
}

/* 선택/피어 하이라이트 */
.selected{
  position: relative;
  z-index: 3; /* 격자 위 */
  box-shadow: inset 0 0 0 2px color-mix(in oklab, var(--accent,#22c55e), transparent 30%);
}
.peer{ background: color-mix(in oklab, var(--panel) 95%, black 5%); }

/* 값/메모 */
.value{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-weight:700;
  font-size: calc(var(--cell) * 0.62);
  z-index: 2; /* 격자 위 */
}
.given .value{ color: var(--text, var(--c-text)); }
.user  .value{ color: var(--user-blue); }

.notes{
  position:absolute; inset:0;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  padding:2px; box-sizing:border-box;
  z-index: 2; /* 격자 위 */
}
.note{
  font-size: calc(var(--cell) * 0.26);
  line-height:1;
  display:flex; align-items:center; justify-content:center;
  color: var(--note);
}

/* 키패드 */
.keypad{ display:flex; gap:8px; margin-top:10px; }
.key, .keyAlt{
  background: var(--panel);
  border:1px solid var(--panel-border);
  border-radius:8px;
  min-width:40px; padding: 10px 12px;
  font-weight:700;
}
.key{ color: var(--sudoku-user); font-size: 22px; }
.keyAlt{ color: var(--text, var(--c-text)); font-size: 16px; }

/* 하단 액션 */
.footer{ display:flex; justify-content:center; margin-top:16px; }
.actions{ display:flex; gap:12px; }
.action{
  background: var(--panel);
  color: var(--text, var(--c-text));
  border:1px solid var(--panel-border);
  padding:8px 12px; border-radius:8px;
}
.badge{
  display:inline-block; margin-left:6px; padding:2px 8px;
  border-radius: 999px; background: var(--chip-bg, var(--c-chip)); color: var(--text);
}

/* Responsive */
@media (max-width: 560px){
  .board{ --cell: 36px; width: calc(var(--cell) * 9); height: calc(var(--cell) * 9); }
}
